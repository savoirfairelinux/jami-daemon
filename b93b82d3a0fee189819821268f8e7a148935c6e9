{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "97cff198_65fa8724",
        "filename": "src/media/media_decoder.cpp",
        "patchSetId": 2
      },
      "lineNbr": 94,
      "author": {
        "id": 220
      },
      "writtenOn": "2022-03-10T23:56:16Z",
      "side": 1,
      "message": "this will make the requirement to ffmpeg \u003e 5.0 for all platforms (should be changed in contrib/src/ffmpeg and at least configure.ac).\nOur patches should be re-added (auto birate, windows screen sharing, etc)\n\nAlso, for future reviewers didn\u0027t check but may introduce others warning (may be some new deprecated API), and calls needs to be checked (same as screensharing)",
      "range": {
        "startLine": 94,
        "startChar": 5,
        "endLine": 94,
        "endChar": 28
      },
      "revId": "b93b82d3a0fee189819821268f8e7a148935c6e9",
      "serverId": "1e26b4c1-6b8c-47ff-9df7-501b633d3b5a"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0a667086_d1bccbe3",
        "filename": "src/media/media_decoder.cpp",
        "patchSetId": 2
      },
      "lineNbr": 94,
      "author": {
        "id": 610
      },
      "writtenOn": "2022-03-11T11:09:12Z",
      "side": 1,
      "message": "Fixed. Now builds with both ffmpeg 4.4 and 5.0.\n\nI do not know ffmpeg, so can\u0027t rebase the patches easily.\n\nArch linux use ffmpeg 5.0 for Jami for 1+ month already, and no issues were reported. Personally can confirm that at least one-to-one video calls work fine.\n\nThe benefit from this patch is that it allows to build the daemon with ffmpeg 5.0 correctly (Arch linux use -fpermissive to suppress build errors).",
      "parentUuid": "97cff198_65fa8724",
      "range": {
        "startLine": 94,
        "startChar": 5,
        "endLine": 94,
        "endChar": 28
      },
      "revId": "b93b82d3a0fee189819821268f8e7a148935c6e9",
      "serverId": "1e26b4c1-6b8c-47ff-9df7-501b633d3b5a"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "63fc3dc2_c4dd4a93",
        "filename": "src/media/media_decoder.cpp",
        "patchSetId": 2
      },
      "lineNbr": 94,
      "author": {
        "id": 938
      },
      "writtenOn": "2022-03-12T04:07:53Z",
      "side": 1,
      "message": "1. Is supporting 2 versions of ffmpeg a backwards step? Would it be similar to supporting Qt5 and Qt6 at the same time. Additionally, will Jami’s packaging size unnecessarily increase?\n\n2. Would it be advisable to only add ffmpeg 5.0 to Jami when:\na) all the patches that Sébastien mentioned are re-added (auto birate, windows screen sharing, etc); and\nb) ffmeg 4.4 is removed at the same time?\n\n3. If Jami is released with ffmpeg 5.0 but without the patches:\na) People may start writing bug reports about the regressions.\nb) Or even worse, people may not write any bug reports; then abandon and spread negative word-of-mouth promotion about Jami.\nc) Anyone who has funded Jami features that no longer exist due to the patches not being re-added, i.e. causing regressions, may cease further funding.\n\n4. However, it seems that ffmpeg 5.0 with the re-added patches will provide a great improvement to Jami.\n\nThank you",
      "parentUuid": "0a667086_d1bccbe3",
      "range": {
        "startLine": 94,
        "startChar": 5,
        "endLine": 94,
        "endChar": 28
      },
      "revId": "b93b82d3a0fee189819821268f8e7a148935c6e9",
      "serverId": "1e26b4c1-6b8c-47ff-9df7-501b633d3b5a"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "22c4bb0a_05fd5f69",
        "filename": "src/media/media_decoder.cpp",
        "patchSetId": 2
      },
      "lineNbr": 94,
      "author": {
        "id": 6
      },
      "writtenOn": "2022-03-12T18:46:08Z",
      "side": 1,
      "message": "@Ovari: this is not the same as Qt6 vs Qt5, which is a major incompatible change.\n\nFFmpeg 5 mostly just removed deprecated APIs (that apparently we didn\u0027t use) and added some \"const\" here and there. It\u0027s easily possible to be compatible with both ffmpeg 4 and 5.\n\nMaking sure we can build with ffmpeg 5 (while still building with ffmpeg 4) would be part of normal maintenance. Indeed, we\u0027ll have to rebase our patches.\n\nWhen Jami is distributed as part of GNU/Linux distros, it\u0027s unfortunately almost always without our FFmpeg patches because of distro policies. So it\u0027s a tradeoff between project visibility and some features.",
      "parentUuid": "63fc3dc2_c4dd4a93",
      "range": {
        "startLine": 94,
        "startChar": 5,
        "endLine": 94,
        "endChar": 28
      },
      "revId": "b93b82d3a0fee189819821268f8e7a148935c6e9",
      "serverId": "1e26b4c1-6b8c-47ff-9df7-501b633d3b5a"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ba9a0919_f25694db",
        "filename": "src/media/media_decoder.cpp",
        "patchSetId": 2
      },
      "lineNbr": 94,
      "author": {
        "id": 220
      },
      "writtenOn": "2022-03-15T20:10:43Z",
      "side": 1,
      "message": "Anyway rebasing our patches can be done later, here it doesn\u0027t change anything and build for both versiosn",
      "parentUuid": "22c4bb0a_05fd5f69",
      "range": {
        "startLine": 94,
        "startChar": 5,
        "endLine": 94,
        "endChar": 28
      },
      "revId": "b93b82d3a0fee189819821268f8e7a148935c6e9",
      "serverId": "1e26b4c1-6b8c-47ff-9df7-501b633d3b5a"
    }
  ]
}