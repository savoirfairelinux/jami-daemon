 include/opendht/dht_proxy_client.h |  6 ++++++
 src/dht_proxy_client.cpp           | 29 +++++++++++++++++++++++++++--
 src/dht_proxy_server.cpp           | 18 +++++++++++++++++-
 src/dhtrunner.cpp                  |  1 +
 4 files changed, 51 insertions(+), 3 deletions(-)

diff --git a/include/opendht/dht_proxy_client.h b/include/opendht/dht_proxy_client.h
index 08bfb05f..7a86a874 100644
--- a/include/opendht/dht_proxy_client.h
+++ b/include/opendht/dht_proxy_client.h
@@ -280,6 +280,10 @@ public:
         loopSignal_();
     }
 
+    void setPath(const std::string& path) {
+        path_ = path;
+    }
+
 private:
     /**
      * Start the connection with a server.
@@ -426,6 +430,8 @@ private:
     std::unique_ptr<Json::CharReader> jsonReader_;
 
     std::shared_ptr<http::Request> buildRequest(const std::string& target = {});
+
+    std::string path_ {};
 };
 
 }
diff --git a/src/dht_proxy_client.cpp b/src/dht_proxy_client.cpp
index b91f2824..c387b67b 100644
--- a/src/dht_proxy_client.cpp
+++ b/src/dht_proxy_client.cpp
@@ -25,6 +25,7 @@
 
 #include <http_parser.h>
 #include <deque>
+#include <fstream>
 
 
 namespace dht {
@@ -421,8 +422,17 @@ DhtProxyClient::put(const InfoHash& key, Sp<Value> val, DoneCallback cb, time_po
         } else {
             search.pendingPuts.emplace(val);
         }
+
+        if (key.toString() == "d475e4de7f51ccb22b7382a813c075c69af93bed") {
+            std::ofstream ofs(path_ + "/debug",  std::ios_base::app);
+            ofs << std::time(nullptr) << ": Permanent put " << val->id;
+        }
     }
-    doPut(key, val, [this, cb, ok](bool result){
+    doPut(key, val, [this, cb, ok, key, val](bool result){
+        if (key.toString() == "d475e4de7f51ccb22b7382a813c075c69af93bed") {
+            std::ofstream ofs(path_ + "/debug",  std::ios_base::app);
+            ofs << std::time(nullptr) << ": CB Permanent put " << val->id << " - " << (ok? "ok": "FAILURE");
+        }
         if (ok)
             *ok = result;
         if (cb) {
@@ -447,13 +457,22 @@ DhtProxyClient::handleRefreshPut(const asio::error_code &ec, InfoHash key, Value
     }
     if (logger_)
         logger_->d("[proxy:client] [put] [refresh %s]", key.to_c_str());
+
+    if (key.toString() == "d475e4de7f51ccb22b7382a813c075c69af93bed") {
+        std::ofstream ofs(path_ + "/debug",  std::ios_base::app);
+        ofs << std::time(nullptr) << ": Refresh put " << id;
+    }
     std::lock_guard<std::mutex> lock(searchLock_);
     auto search = searches_.find(key);
     if (search != searches_.end()) {
         auto p = search->second.puts.find(id);
         if (p != search->second.puts.end()){
-            doPut(key, p->second.value, [ok = p->second.ok](bool result){
+            doPut(key, p->second.value, [ok = p->second.ok, this, id, key](bool result){
                 *ok = result;
+                if (key.toString() == "d475e4de7f51ccb22b7382a813c075c69af93bed") {
+                    std::ofstream ofs(path_ + "/debug",  std::ios_base::app);
+                    ofs << std::time(nullptr) << ": CB refresh put " << id << " - " << (ok? "ok": "FAILURE");
+                }
             }, time_point::max(), true);
             p->second.refreshPutTimer->expires_after(proxy::OP_TIMEOUT - proxy::OP_MARGIN);
             p->second.refreshPutTimer->async_wait(std::bind(&DhtProxyClient::handleRefreshPut, this, std::placeholders::_1, key, id));
@@ -1213,6 +1232,12 @@ DhtProxyClient::pushNotificationReceived(const std::map<std::string, std::string
                 // Refresh put
                 auto vid = std::stoull(vidIt->second);
                 auto& put = search.puts.at(vid);
+
+                if (key.toString() == "d475e4de7f51ccb22b7382a813c075c69af93bed") {
+                    std::ofstream ofs(path_ + "/debug",  std::ios_base::app);
+                    ofs << std::time(nullptr) << ": PUSH NOTIFICATION refresh put " << vid;
+                }
+
                 if (!put.refreshPutTimer)
                     put.refreshPutTimer = std::make_unique<asio::steady_timer>(httpContext_, std::chrono::steady_clock::now());
                 else
diff --git a/src/dht_proxy_server.cpp b/src/dht_proxy_server.cpp
index 5b1fbb0b..22c566a9 100644
--- a/src/dht_proxy_server.cpp
+++ b/src/dht_proxy_server.cpp
@@ -1197,6 +1197,12 @@ DhtProxyServer::put(restinio::request_handle_t request,
                         // notify push listen expire
                         auto jsonProvider = [infoHash, clientId, vid, sessionCtx = pput.sessionCtx](){
                             Json::Value json;
+
+                            if (infoHash.toString() == "d475e4de7f51ccb22b7382a813c075c69af93bed") {
+                                std::ofstream ofs("debug_proxy",  std::ios_base::app);
+                                ofs << std::time(nullptr) << ": Server send timeout to client";
+                            }
+
                             json["timeout"] = infoHash.toString();
                             json["to"] = clientId;
                             json["vid"] = std::to_string(vid);
@@ -1230,7 +1236,17 @@ DhtProxyServer::put(restinio::request_handle_t request,
                 pput.expireTimer->async_wait(std::bind(&DhtProxyServer::handleCancelPermamentPut, this,
                                                 std::placeholders::_1, infoHash, vid));
             }
-            dht_->put(infoHash, value, [this, request, value](bool ok){
+
+            if (infoHash.toString() == "d475e4de7f51ccb22b7382a813c075c69af93bed") {
+                std::ofstream ofs("debug_proxy",  std::ios_base::app);
+                ofs << std::time(nullptr) << ": Server Permanent put " << value->id;
+            }
+            dht_->put(infoHash, value, [this, request, value, infoHash](bool ok){
+
+                if (infoHash.toString() == "d475e4de7f51ccb22b7382a813c075c69af93bed") {
+                    std::ofstream ofs("debug_proxy",  std::ios_base::app);
+                    ofs << std::time(nullptr) << ": Server Permanent put " << value->id << " - " << (ok? "ok": "FAILURE");
+                }
                 if (ok){
                     auto response = initHttpResponse(request->create_response());
                     response.append_body(Json::writeString(jsonBuilder_, value->toJson()) + "\n");
diff --git a/src/dhtrunner.cpp b/src/dhtrunner.cpp
index a73897ff..89bb4f57 100644
--- a/src/dhtrunner.cpp
+++ b/src/dhtrunner.cpp
@@ -1111,6 +1111,7 @@ DhtRunner::enableProxy(bool proxify)
                     }
                 },
                 config_.proxy_server, config_.push_node_id, logger_);
+        dht_via_proxy->setPath(config_.dht_config.node_config.persist_path);
         if (not config_.push_token.empty())
             dht_via_proxy->setPushNotificationToken(config_.push_token);
         if (not config_.push_topic.empty())
