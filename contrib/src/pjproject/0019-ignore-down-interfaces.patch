 pjlib/src/pj/ip_helper_generic.c | 12 +++++++++++-
 1 file changed, 11 insertions(+), 1 deletion(-)

diff --git a/pjlib/src/pj/ip_helper_generic.c b/pjlib/src/pj/ip_helper_generic.c
index d7bbf725e..af457ddb2 100644
--- a/pjlib/src/pj/ip_helper_generic.c
+++ b/pjlib/src/pj/ip_helper_generic.c
@@ -97,6 +97,11 @@ static pj_status_t if_enum_by_af(int af,
 	    continue; /* Skip when interface is down */
 	}
 
+	if ((it->ifa_flags & IFF_RUNNING)==0) {
+	    TRACE_((THIS_FILE, "  interface is not running"));
+	    continue; /* Skip when interface is down */
+	}
+
 #if PJ_IP_HELPER_IGNORE_LOOPBACK_IF
 	if (it->ifa_flags & IFF_LOOPBACK) {
 	    TRACE_((THIS_FILE, "  loopback interface"));
@@ -197,7 +202,7 @@ static pj_status_t if_enum_by_af(int af,
 	    continue;
 	}
 
-        if (ioctl(sock, SIOCGIFFLAGS, &iff) != 0) {
+	if (ioctl(sock, SIOCGIFFLAGS, &iff) != 0) {
 	    TRACE_((THIS_FILE, "  ioctl(SIOCGIFFLAGS) failed: %s",
 		    get_os_errmsg()));
 	    continue;	/* Failed to get flags, continue */
@@ -208,6 +213,11 @@ static pj_status_t if_enum_by_af(int af,
 	    continue; /* Skip when interface is down */
 	}
 
+	if ((iff.ifa_flags & IFF_RUNNING)==0) {
+	    TRACE_((THIS_FILE, "  interface is not running"));
+	    continue; /* Skip when interface is down */
+	}
+
 #if PJ_IP_HELPER_IGNORE_LOOPBACK_IF
 	if (iff.ifr_flags & IFF_LOOPBACK) {
 	    TRACE_((THIS_FILE, "  loopback interface"));
