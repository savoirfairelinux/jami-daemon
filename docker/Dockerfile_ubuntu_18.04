FROM ubuntu:18.04

RUN apt-get update && \
    apt install -y software-properties-common

RUN add-apt-repository universe && \
    apt-get update && \
    apt-get install -y -o Acquire::Retries=10 \
        g++-8 \
        gcc-8 \
        make \
        libc6-dev \
        libstdc++-8-dev && \
    apt-get install -y -o Acquire::Retries=10 \
        git && \
    apt-get install -y -o Acquire::Retries=10 autoconf && \
    apt-get install -y -o Acquire::Retries=10 automake && \
    apt-get install -y -o Acquire::Retries=10 autopoint && \
    apt-get install -y -o Acquire::Retries=10 cmake && \
    apt-get install -y -o Acquire::Retries=10 libtool && \
    apt-get install -y -o Acquire::Retries=10 libdbus-1-dev && \
    apt-get install -y -o Acquire::Retries=10 libdbus-c++-dev && \
    apt-get install -y -o Acquire::Retries=10 libupnp-dev && \
    apt-get install -y -o Acquire::Retries=10 libgnutls28-dev && \
    apt-get install -y -o Acquire::Retries=10 libargon2-0-dev && \
    apt-get install -y -o Acquire::Retries=10 libcanberra-gtk3-dev && \
    apt-get install -y -o Acquire::Retries=10 libclutter-gtk-1.0-dev && \
    apt-get install -y -o Acquire::Retries=10 libclutter-1.0-dev && \
    apt-get install -y -o Acquire::Retries=10 libglib2.0-dev && \
    apt-get install -y -o Acquire::Retries=10 libgtk-3-dev && \
    apt-get install -y -o Acquire::Retries=10 libnotify-dev && \
    apt-get install -y -o Acquire::Retries=10 qtbase5-dev && \
    apt-get install -y -o Acquire::Retries=10 qttools5-dev && \
    apt-get install -y -o Acquire::Retries=10 qttools5-dev-tools && \
    apt-get install -y -o Acquire::Retries=10 yasm && \
    apt-get install -y -o Acquire::Retries=10 nasm && \
    apt-get install -y -o Acquire::Retries=10 autotools-dev && \
    apt-get install -y -o Acquire::Retries=10 gettext && \
    apt-get install -y -o Acquire::Retries=10 libpulse-dev && \
    apt-get install -y -o Acquire::Retries=10 libasound2-dev && \
    apt-get install -y -o Acquire::Retries=10 libpcre3-dev && \
    apt-get install -y -o Acquire::Retries=10 libyaml-cpp-dev && \
    apt-get install -y -o Acquire::Retries=10 libboost-dev && \
    apt-get install -y -o Acquire::Retries=10 libxext-dev && \
    apt-get install -y -o Acquire::Retries=10 libxfixes-dev && \
    apt-get install -y -o Acquire::Retries=10 libspeex-dev && \
    apt-get install -y -o Acquire::Retries=10 libspeexdsp-dev && \
    apt-get install -y -o Acquire::Retries=10 uuid-dev && \
    apt-get install -y -o Acquire::Retries=10 libavcodec-dev && \
    apt-get install -y -o Acquire::Retries=10 libavutil-dev && \
    apt-get install -y -o Acquire::Retries=10 libavformat-dev && \
    apt-get install -y -o Acquire::Retries=10 libswscale-dev && \
    apt-get install -y -o Acquire::Retries=10 libavdevice-dev && \
    apt-get install -y -o Acquire::Retries=10 libopus-dev && \
    apt-get install -y -o Acquire::Retries=10 libudev-dev && \
    apt-get install -y -o Acquire::Retries=10 libjsoncpp-dev && \
    apt-get install -y -o Acquire::Retries=10 libmsgpack-dev && \
    apt-get install -y -o Acquire::Retries=10 libnatpmp-dev && \
    apt-get install -y -o Acquire::Retries=10 libayatana-appindicator3-dev && \
    apt-get install -y -o Acquire::Retries=10 libqrencode-dev && \
    apt-get install -y -o Acquire::Retries=10 libnm-dev && \
    apt-get install -y -o Acquire::Retries=10 libwebkit2gtk-4.0-dev && \
    apt-get install -y -o Acquire::Retries=10 libcrypto++-dev && \
    apt-get install -y -o Acquire::Retries=10 libva-dev && \
    apt-get install -y -o Acquire::Retries=10 libvdpau-dev && \
    apt-get install -y -o Acquire::Retries=10 libssl-dev && \
    apt-get install -y -o Acquire::Retries=10 libsndfile1-dev && \
    apt-get install -y -o Acquire::Retries=10 libsecp256k1-dev && \
    apt-get install -y -o Acquire::Retries=10 libasio-dev && \
    apt-get remove -y \
        libstdc++-7-dev && \
    apt-get install -y -o Acquire::Retries=10 \
        libexpat1-dev

RUN ls -la /usr/include/c++/8/charconv

# Tests framework
RUN apt-get install -y -o Acquire::Retries=10 \
        libcppunit-dev \
        sip-tester

RUN apt-get clean
