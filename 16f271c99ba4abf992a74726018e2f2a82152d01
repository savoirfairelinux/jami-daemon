{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "e79965e9_99c6283d",
        "filename": "contrib/src/dhtnet/rules.mak",
        "patchSetId": 12
      },
      "lineNbr": 2,
      "author": {
        "id": 220
      },
      "writtenOn": "2023-07-11T19:28:22Z",
      "side": 1,
      "message": "for now ubuntu 20.04 is the minimal version supported. By default it\u0027s cmake 3.16.3\n\nCI must by installing cmake 3.22 in daemon/docker/Dockerfile_ubuntu_20.04 (and documentation as packaging will need to be updated)",
      "range": {
        "startLine": 2,
        "startChar": 18,
        "endLine": 2,
        "endChar": 58
      },
      "revId": "16f271c99ba4abf992a74726018e2f2a82152d01",
      "serverId": "1e26b4c1-6b8c-47ff-9df7-501b633d3b5a"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a5bd5dbb_0faae3db",
        "filename": "contrib/src/dhtnet/rules.mak",
        "patchSetId": 12
      },
      "lineNbr": 2,
      "author": {
        "id": 220
      },
      "writtenOn": "2023-07-11T19:30:39Z",
      "side": 1,
      "message": "wanted commit, seems to not build with some missing includes:\n\n[ 50%] Building CXX object CMakeFiles/dhtnet.dir/src/security/certstore.cpp.o\n[ 57%] Building CXX object CMakeFiles/dhtnet.dir/src/security/tls_session.cpp.o\nIn file included from /home/sblin/Projects/jami-project/client-qt/daemon/contrib/native/dhtnet/include/ice_transport.h:23,\n                 from /home/sblin/Projects/jami-project/client-qt/daemon/contrib/native/dhtnet/src/ice_transport.cpp:21:\n/home/sblin/Projects/jami-project/client-qt/daemon/contrib/native/dhtnet/include/ice_options.h:68:10: error: ‘shared_ptr’ in namespace ‘std’ does not name a template type\n   68 |     std::shared_ptr\u003cupnp::UPnPContext\u003e upnpContext {};\n      |          ^~~~~~~~~~\n/home/sblin/Projects/jami-project/client-qt/daemon/contrib/native/dhtnet/include/ice_options.h:8:1: note: ‘std::shared_ptr’ is defined in header ‘\u003cmemory\u003e’; did you forget to ‘#include \u003cmemory\u003e’?\n    7 | #include \"ip_utils.h\"\n  +++ |+#include \u003cmemory\u003e\n    8 | \nIn file included from /home/sblin/Projects/jami-project/client-qt/daemon/contrib/native/dhtnet/include/connectionmanager.h:19,\n                 from /home/sblin/Projects/jami-project/client-qt/daemon/contrib/native/dhtnet/src/connectionmanager.cpp:18:\n/home/sblin/Projects/jami-project/client-qt/daemon/contrib/native/dhtnet/include/ice_options.h:68:10: error: ‘shared_ptr’ in namespace ‘std’ does not name a template type\n   68 |     std::shared_ptr\u003cupnp::UPnPContext\u003e upnpContext {};\n      |          ^~~~~~~~~~\n/home/sblin/Projects/jami-project/client-qt/daemon/contrib/native/dhtnet/include/ice_options.h:8:1: note: ‘std::shared_ptr’ is defined in header ‘\u003cmemory\u003e’; did you forget to ‘#include \u003cmemory\u003e’?\n    7 | #include \"ip_utils.h\"\n  +++ |+#include \u003cmemory\u003e\n    8 | \nIn file included from /home/sblin/Projects/jami-project/client-qt/daemon/contrib/native/dhtnet/src/ice_transport.cpp:21:\n/home/sblin/Projects/jami-project/client-qt/daemon/contrib/native/dhtnet/include/ice_transport.h:171:37: error: ‘std::chrono’ has not been declared\n  171 |     bool waitForInitialization(std::chrono::milliseconds timeout);\n      |                                     ^~~~~~\n/home/sblin/Projects/jami-project/client-qt/daemon/contrib/native/dhtnet/include/ice_transport.h:171:58: error: expected ‘,’ or ‘...’ before ‘timeout’\n  171 |     bool waitForInitialization(std::chrono::milliseconds timeout);\n      |                                                          ^~~~~~~\n/home/sblin/Projects/jami-project/client-qt/daemon/contrib/native/dhtnet/include/ice_transport.h:173:33: error: ‘std::chrono’ has not been declared\n  173 |     int waitForNegotiation(std::chrono::milliseconds timeout);\n      |                                 ^~~~~~\n/home/sblin/Projects/jami-project/client-qt/daemon/contrib/native/dhtnet/include/ice_transport.h:173:54: error: expected ‘,’ or ‘...’ before ‘timeout’\n  173 |     int waitForNegotiation(std::chrono::milliseconds timeout);\n      |                                                      ^~~~~~~\n/home/sblin/Projects/jami-project/client-qt/daemon/contrib/native/dhtnet/include/ice_transport.h:175:48: error: ‘std::chrono’ has not been declared\n  175 |     ssize_t waitForData(unsigned comp_id, std::chrono::milliseconds timeout, std::error_code\u0026 ec);\n      |                                                ^~~~~~\n/home/sblin/Projects/jami-project/client-qt/daemon/contrib/native/dhtnet/include/ice_transport.h:175:69: error: expected ‘,’ or ‘...’ before ‘timeout’\n  175 |     ssize_t waitForData(unsigned comp_id, std::chrono::milliseconds timeout, std::error_code\u0026 ec);\n      |                                                                     ^~~~~~~\nIn file included from /home/sblin/Projects/jami-project/client-qt/daemon/contrib/native/dhtnet/src/ice_transport.cpp:23:\n/home/sblin/Projects/jami-project/client-qt/daemon/contrib/native/dhtnet/include/ice_socket.h:49:30: error: ‘std::chrono’ has not been declared\n   49 |     ssize_t waitForData(std::chrono::milliseconds timeout);\n      |                              ^~~~~~\n/home/sblin/Projects/jami-project/client-qt/daemon/contrib/native/dhtnet/include/ice_socket.h:49:51: error: expected ‘,’ or ‘...’ before ‘timeout’\n   49 |     ssize_t waitForData(std::chrono::milliseconds timeout);\n      |                                                   ^~~~~~~\n/home/sblin/Projects/jami-project/client-qt/daemon/contrib/native/dhtnet/src/ice_transport.cpp: In member function ‘void dhtnet::IceTransport::Impl::initIceInstance(const dhtnet::IceTransportOptions\u0026)’:\n/home/sblin/Projects/jami-project/client-qt/daemon/contrib/native/dhtnet/src/ice_transport.cpp:426:50: error: ‘const struct dhtnet::IceTransportOptions’ has no member named ‘upnpContext’\n  426 |         upnp_.reset(new upnp::Controller(options.upnpContext));\n      |                                                  ^~~~~~~~~~~\n/home/sblin/Projects/jami-project/client-qt/daemon/contrib/native/dhtnet/src/ice_transport.cpp: At global scope:\n/home/sblin/Projects/jami-project/client-qt/daemon/contrib/native/dhtnet/src/ice_transport.cpp:1740:1: error: no declaration matches ‘bool dhtnet::IceTransport::waitForInitialization(std::chrono::milliseconds)’\n 1740 | IceTransport::waitForInitialization(std::chrono::milliseconds timeout)\n      | ^~~~~~~~~~~~\nIn file included from /home/sblin/Projects/jami-project/client-qt/daemon/contrib/native/dhtnet/src/ice_transport.cpp:21:\n/home/sblin/Projects/jami-project/client-qt/daemon/contrib/native/dhtnet/include/ice_transport.h:171:10: note: candidate is: ‘bool dhtnet::IceTransport::waitForInitialization(int)’\n  171 |     bool waitForInitialization(std::chrono::milliseconds timeout);\n      |          ^~~~~~~~~~~~~~~~~~~~~\n/home/sblin/Projects/jami-project/client-qt/daemon/contrib/native/dhtnet/include/ice_transport.h:71:7: note: ‘class dhtnet::IceTransport’ defined here\n   71 | class IceTransport\n      |       ^~~~~~~~~~~~\n/home/sblin/Projects/jami-project/client-qt/daemon/contrib/native/dhtnet/src/ice_transport.cpp:1746:1: error: no declaration matches ‘ssize_t dhtnet::IceTransport::waitForData(unsigned int, std::chrono::milliseconds, std::error_code\u0026)’\n 1746 | IceTransport::waitForData(unsigned compId, std::chrono::milliseconds timeout, std::error_code\u0026 ec)\n      | ^~~~~~~~~~~~\nIn file included from /home/sblin/Projects/jami-project/client-qt/daemon/contrib/native/dhtnet/src/ice_transport.cpp:21:\n/home/sblin/Projects/jami-project/client-qt/daemon/contrib/native/dhtnet/include/ice_transport.h:175:13: note: candidate is: ‘ssize_t dhtnet::IceTransport::waitForData(unsigned int, int)’\n  175 |     ssize_t waitForData(unsigned comp_id, std::chrono::milliseconds timeout, std::error_code\u0026 ec);\n      |             ^~~~~~~~~~~\n/home/sblin/Projects/jami-project/client-qt/daemon/contrib/native/dhtnet/include/ice_transport.h:71:7: note: ‘class dhtnet::IceTransport’ defined here\n   71 | class IceTransport\n      |       ^~~~~~~~~~~~\n/home/sblin/Projects/jami-project/client-qt/daemon/contrib/native/dhtnet/src/ice_transport.cpp:1870:1: error: no declaration matches ‘ssize_t dhtnet::IceSocket::waitForData(std::chrono::milliseconds)’\n 1870 | IceSocket::waitForData(std::chrono::milliseconds timeout)\n      | ^~~~~~~~~\nIn file included from /home/sblin/Projects/jami-project/client-qt/daemon/contrib/native/dhtnet/src/ice_transport.cpp:23:\n/home/sblin/Projects/jami-project/client-qt/daemon/contrib/native/dhtnet/include/ice_socket.h:49:13: note: candidate is: ‘ssize_t dhtnet::IceSocket::waitForData(int)’\n   49 |     ssize_t waitForData(std::chrono::milliseconds timeout);\n      |             ^~~~~~~~~~~\n/home/sblin/Projects/jami-project/client-qt/daemon/contrib/native/dhtnet/include/ice_socket.h:35:7: note: ‘class dhtnet::IceSocket’ defined here\n   35 | class IceSocket\n      |       ^~~~~~~~~\n[ 64%] Building CXX object CMakeFiles/dhtnet.dir/src/security/threadloop.cpp.o\n/home/sblin/Projects/jami-project/client-qt/daemon/contrib/native/dhtnet/src/fileutils.cpp: In function ‘std::vector\u003cstd::__cxx11::basic_string\u003cchar\u003e \u003e dhtnet::fileutils::readDirectory(const string\u0026)’:\n/home/sblin/Projects/jami-project/client-qt/daemon/contrib/native/dhtnet/src/fileutils.cpp:477:22: warning: ‘int readdir_r(DIR*, dirent*, dirent**)’ is deprecated [-Wdeprecated-declarations]\n  477 |     while (!readdir_r(dp, reinterpret_cast\u003cdirent*\u003e(buf.data()), \u0026entry) \u0026\u0026 entry) {\n      |             ~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\nIn file included from /home/sblin/Projects/jami-project/client-qt/daemon/contrib/native/dhtnet/src/fileutils.cpp:47:\n/usr/include/dirent.h:183:12: note: declared here\n  183 | extern int readdir_r (DIR *__restrict __dirp,\n      |            ^~~~~~~~~",
      "range": {
        "startLine": 2,
        "startChar": 18,
        "endLine": 2,
        "endChar": 58
      },
      "revId": "16f271c99ba4abf992a74726018e2f2a82152d01",
      "serverId": "1e26b4c1-6b8c-47ff-9df7-501b633d3b5a"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5eb6cd4f_0c1d130c",
        "filename": "contrib/src/dhtnet/rules.mak",
        "patchSetId": 12
      },
      "lineNbr": 2,
      "author": {
        "id": 6
      },
      "writtenOn": "2023-07-12T15:56:43Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "e79965e9_99c6283d",
      "range": {
        "startLine": 2,
        "startChar": 18,
        "endLine": 2,
        "endChar": 58
      },
      "revId": "16f271c99ba4abf992a74726018e2f2a82152d01",
      "serverId": "1e26b4c1-6b8c-47ff-9df7-501b633d3b5a"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2800bcd6_6492a9e9",
        "filename": "contrib/src/dhtnet/rules.mak",
        "patchSetId": 12
      },
      "lineNbr": 2,
      "author": {
        "id": 6
      },
      "writtenOn": "2023-07-12T15:56:43Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "a5bd5dbb_0faae3db",
      "range": {
        "startLine": 2,
        "startChar": 18,
        "endLine": 2,
        "endChar": 58
      },
      "revId": "16f271c99ba4abf992a74726018e2f2a82152d01",
      "serverId": "1e26b4c1-6b8c-47ff-9df7-501b633d3b5a"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d14c594b_20eb1858",
        "filename": "contrib/src/dhtnet/rules.mak",
        "patchSetId": 12
      },
      "lineNbr": 7,
      "author": {
        "id": 220
      },
      "writtenOn": "2023-07-11T19:28:22Z",
      "side": 1,
      "message": "on ubuntu 22.04, with msgpack from system (not built in contrib) I see:\n\nres - done\n-- Found PkgConfig: /usr/bin/pkg-config (found version \"1.8.0\") \nCMake Error at CMakeLists.txt:22 (find_package):\n  Could not find a package configuration file provided by \"msgpack-cxx\" with\n  any of the following names:\n\n    msgpack-cxxConfig.cmake\n    msgpack-cxx-config.cmake\n\n  Add the installation prefix of \"msgpack-cxx\" to CMAKE_PREFIX_PATH or set\n  \"msgpack-cxx_DIR\" to a directory containing one of the above files.  If\n  \"msgpack-cxx\" provides a separate development package or SDK, be sure it\n  has been installed.\n\n\n\nIf I force build contrib it\u0027s ok:\n\n\n```\npkg-config --libs msgpack  \n-lmsgpackc\npkg-config msgpack --modversion     \n3.3.0\n\nsudo apt-get install libmsgpack-dev\nReading package lists... Done\nBuilding dependency tree... Done\nReading state information... Done\nlibmsgpack-dev is already the newest version (3.3.0-4).\n0 upgraded, 0 newly installed, 0 to remove and 82 not upgraded.\n\n```",
      "range": {
        "startLine": 7,
        "startChar": 15,
        "endLine": 7,
        "endChar": 22
      },
      "revId": "16f271c99ba4abf992a74726018e2f2a82152d01",
      "serverId": "1e26b4c1-6b8c-47ff-9df7-501b633d3b5a"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e41cf698_0c8f507a",
        "filename": "contrib/src/dhtnet/rules.mak",
        "patchSetId": 12
      },
      "lineNbr": 7,
      "author": {
        "id": 6
      },
      "writtenOn": "2023-07-12T15:56:43Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d14c594b_20eb1858",
      "range": {
        "startLine": 7,
        "startChar": 15,
        "endLine": 7,
        "endChar": 22
      },
      "revId": "16f271c99ba4abf992a74726018e2f2a82152d01",
      "serverId": "1e26b4c1-6b8c-47ff-9df7-501b633d3b5a"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7c4ce72d_b0c9d23f",
        "filename": "contrib/src/dhtnet/rules.mak",
        "patchSetId": 12
      },
      "lineNbr": 7,
      "author": {
        "id": 220
      },
      "writtenOn": "2023-07-12T17:28:29Z",
      "side": 1,
      "message": "```\ncd dhtnet \u0026\u0026 cd build \u0026\u0026 CC\u003d\"gcc\" CXX\u003d\"g++\" LD\u003d\"ld\" AR\u003d\"ar\" CCAS\u003d\"gcc -c\" RANLIB\u003d\"ranlib\" STRIP\u003d\"strip\" PATH\u003d\"/home/sblin/Projects/jami-project/client-qt/daemon/contrib/x86_64-linux-gnu/bin:/home/sblin/Projects/jami-project/client-qt/daemon/extras/tools/build/bin:/home/sblin/.asdf/shims:/home/sblin/.asdf/bin:/home/sblin/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/snap/bin:~/.local/bin/\" CPPFLAGS\u003d\" -I/home/sblin/Projects/jami-project/client-qt/daemon/contrib/x86_64-linux-gnu/include -fPIC\" CFLAGS\u003d\" -I/home/sblin/Projects/jami-project/client-qt/daemon/contrib/x86_64-linux-gnu/include -DNDEBUG\u003d1 -O3  -fPIC\" CXXFLAGS\u003d\" -I/home/sblin/Projects/jami-project/client-qt/daemon/contrib/x86_64-linux-gnu/include -DNDEBUG\u003d1 -O3  -fPIC\" LDFLAGS\u003d\" -L/home/sblin/Projects/jami-project/client-qt/daemon/contrib/x86_64-linux-gnu/lib\" cmake -DCMAKE_TOOLCHAIN_FILE\u003d/home/sblin/Projects/jami-project/client-qt/daemon/contrib/native/toolchain.cmake -DCMAKE_INSTALL_PREFIX\u003d/home/sblin/Projects/jami-project/client-qt/daemon/contrib/x86_64-linux-gnu -DCMAKE_INSTALL_LIBDIR\u003d/home/sblin/Projects/jami-project/client-qt/daemon/contrib/x86_64-linux-gnu/lib -DBUILD_SHARED_LIBS\u003dOff -DBUILD_TESTING\u003dOff ..\n-- The CXX compiler identification is GNU 11.3.0\n-- Detecting CXX compiler ABI info\n-- Detecting CXX compiler ABI info - done\n-- Check for working CXX compiler: /usr/bin/g++ - skipped\n-- Detecting CXX compile features\n-- Detecting CXX compile features - done\n-- Found PkgConfig: /usr/bin/pkg-config (found version \"0.29.2\") \n-- Could NOT find msgpack-cxx (missing: msgpack-cxx_DIR)\nCMake Error at CMakeLists.txt:25 (add_library):\n  add_library cannot create ALIAS target \"msgpack-cxx\" because target\n  \"msgpack\" does not already exist.\n\n\n-- Checking for module \u0027opendht\u003e\u003d2.6.0\u0027\n--   Found opendht, version 2.6.0\n-- Checking for module \u0027libpjproject\u0027\n--   Found libpjproject, version 2.12.1\n-- Configuring incomplete, errors occurred!\n\n```",
      "parentUuid": "e41cf698_0c8f507a",
      "range": {
        "startLine": 7,
        "startChar": 15,
        "endLine": 7,
        "endChar": 22
      },
      "revId": "16f271c99ba4abf992a74726018e2f2a82152d01",
      "serverId": "1e26b4c1-6b8c-47ff-9df7-501b633d3b5a"
    }
  ]
}